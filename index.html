<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Curso Ajax</title>
</head>
<body>

<button onclick="ajax_get_json()">Mostrar datos</button>

<div id ="info"></div>

<script type="text/javascript">
	
var resultado = document.getElementById("info");
	function ajax_get_json(){

		var xmlhttp;
		if (window.XMLHttpRequest) {
			xmlhttp = new XMLHttpRequest();
		}else{
			xmlhttp = new ActiveXObject("Microsoft.XMLHTPP");
		}

		xmlhttp.onreadystatechange = function(){
			if(xmlhttp.readyState === 4 && xmlhttp.status === 200 ){

				//document.getElementById("info").innerHTML = xmlhttp.responseText; 
				
				var datos = JSON.parse(xmlhttp.responseText); // objeto de json 
				//console.log(datos);
				if(resultado.innerHTML === ""){ // si el dev se encuentra vacio
						for(var i in datos){
						resultado.innerHTML += i + ": " + datos[i] + "</br>"; 
					}

				}


			}	
		}

		xmlhttp.open("GET", "datos.json", true);
		xmlhttp.send();
	}
</script>

<!--
<script type="text/javascript">
	

	// Para saber que tipo de navegador estamos trabajando para cear una peticion ajaz
	function ejecutarAJAX()
	{
		//var ajaxRequest;
		// if(window.XMLHttpRequest) 
		// {
		//	ajaxRequest = new XMLHttpRequest();
		// }else
		// {
		//	ActiveXObject("Microsoft.XMLHTPP");
		//}

		// si es 0 = peticion ha sido inicializada
		// 1 = preticion ha sido stablecida
		// 2 = preticion ha sido enviada
		// 3 = peticion procesada
		// 4 = preticion ha sido finalizada

		var ajaxRequest = new XMLHttpRequest();
		ajaxRequest.onreadystatechange = function(){
			if(ajaxRequest.readyState == 4 && ajaxRequest.status == 200){

				document.getElementById("info").innerHTML = ajaxRequest.responseText; 
			}
		}

		ajaxRequest.open("GET","documento.txt", true); //peticion asincrona
		ajaxRequest.send();
	}

</script>
-->
</body>
</html>